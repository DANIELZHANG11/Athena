# 06_UI_UX_Design_System.md

> **ç‰ˆæœ¬**ï¼šv2.1 (Industry Standard Refined)
> **SSOT**ï¼š`web/src/styles/figma.css` æ˜¯ Design Tokens çš„ä»£ç å®ç°æºï¼›æœ¬æ–‡æ¡£æ˜¯è®¾è®¡è§„èŒƒçš„çœŸç†æºã€‚ä»»ä½•æ ·å¼å¼€å‘å¿…é¡»éµå¾ªæœ¬æ–‡æ¡£ã€‚

---

## 0. UI/UX Pro Max å·¥å…·ä½¿ç”¨æŒ‡å—

> **å·¥å…·æ¥æº**: [nextlevelbuilder/ui-ux-pro-max-skill](https://github.com/nextlevelbuilder/ui-ux-pro-max-skill)
> **æœ¬åœ°è·¯å¾„**: `.agent/workflows/ui-ux-pro-max.md` + `.shared/ui-ux-pro-max/`

### 0.1 å¿«é€Ÿä½¿ç”¨

**æ–¹å¼ä¸€ï¼šSlash å‘½ä»¤** (æ¨è)
```
/ui-ux-pro-max ä¸ºé˜…è¯»å™¨è®¾è®¡ä¸€ä¸ªè®¾ç½®é¢æ¿
```

**æ–¹å¼äºŒï¼šç›´æ¥æœç´¢**
```bash
python .shared/ui-ux-pro-max/scripts/search.py "<keyword>" --domain <domain>
```

### 0.2 å¯ç”¨æœç´¢åŸŸ

| Domain | ç”¨é€” | ç¤ºä¾‹å…³é”®è¯ |
|--------|------|-----------|
| `style` | UI é£æ ¼ (57ç§) | glassmorphism, liquid glass, dark mode |
| `color` | è‰²å½©è°ƒè‰²æ¿ (95ç§) | saas, healthcare, beauty |
| `typography` | å­—ä½“é…å¯¹ (56ç§) | elegant, modern, playful |
| `chart` | å›¾è¡¨ç±»å‹ (24ç§) | trend, comparison, funnel |
| `ux` | UX å‡†åˆ™ (98æ¡) | animation, accessibility, z-index |
| `landing` | è½åœ°é¡µç»“æ„ | hero, pricing, testimonial |

### 0.3 æŠ€æœ¯æ ˆæ”¯æŒ

```bash
python .shared/ui-ux-pro-max/scripts/search.py "<keyword>" --stack <stack>
```
å¯ç”¨æ ˆ: `html-tailwind` (é»˜è®¤), `react`, `nextjs`, `vue`, `svelte`, `swiftui`, `react-native`, `flutter`

---

## 1. è®¾è®¡å“²å­¦ (Design Philosophy)
*   **é™è°§çš„æ™ºæ…§ (Quiet Intelligence)**ï¼šç•Œé¢åº”åƒç©ºæ°”ä¸€æ ·å­˜åœ¨ï¼Œä»…åœ¨ç”¨æˆ·éœ€è¦æ—¶æä¾›æ„ŸçŸ¥ï¼Œç»ä¸å–§å®¾å¤ºä¸»ã€‚
*   **å†…å®¹ä¼˜å…ˆ (Content-First)**ï¼šé˜…è¯»ä½“éªŒæ˜¯æ ¸å¿ƒï¼ŒUI åªæ˜¯å®¹å™¨ã€‚
*   **æŒ‰éœ€æµ®ç° (On-Demand)**ï¼šå¤æ‚çš„å·¥å…·ï¼ˆå¦‚ AI é¢æ¿ã€æ ‡æ³¨å·¥å…·ï¼‰ä»…åœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­ï¼ˆå¦‚é€‰ä¸­æ–‡å­—æ—¶ï¼‰æµ®ç°ã€‚

## 2. Design Tokens (æ ¸å¿ƒå˜é‡)
**å¼€å‘æŒ‡ä»¤**ï¼šæ‰€æœ‰ CSS å±æ€§å€¼å¿…é¡»å¼•ç”¨ä»¥ä¸‹å˜é‡ï¼Œ**ä¸¥ç¦**ä½¿ç”¨ Hex/RGB ç¡¬ç¼–ç ã€‚

### 2.1 è‰²å½©ç³»ç»Ÿ (Colors)
*æ˜ å°„è‡ª `web/src/styles/figma.css`*

| Token Name | Light Value | Dark Value | ç”¨é€”è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| `--color-system-blue` | `#007AFF` | `#0A84FF` | **ä¸»äº¤äº’è‰²** (æŒ‰é’®ã€é“¾æ¥ã€é€‰ä¸­æ€) |
| `--color-system-green` | `#34C759` | `#30D158` | æˆåŠŸã€å®‰å…¨ã€æ­£é¢åé¦ˆ |
| `--color-system-red` | `#FF3B30` | `#FF453A` | é”™è¯¯ã€åˆ é™¤ã€å±é™©æ“ä½œ |
| `--color-system-purple`| `#5856D6` | `#5E5CE6` | **AI ä¸“å±å“ç‰Œè‰²** (Loadingã€å…‰æ ‡) |
| `--system-background` | `#FFFFFF` | `#000000` | åº”ç”¨åº•å±‚èƒŒæ™¯ |
| `--secondary-background`| `#F2F2F7` | `#1C1C1E` | ä¾§è¾¹æ ã€å¡ç‰‡ã€åˆ—è¡¨é¡¹ |
| `--tertiary-background` | `#FFFFFF` | `#2C2C2E` | è¾“å…¥æ¡†ã€æ¨¡æ€æ¡†å†…éƒ¨å®¹å™¨ |
| `--color-label` | `rgba(0,0,0,0.85)` | `rgba(255,255,255,0.85)` | ä¸€çº§æ ‡é¢˜ã€æ­£æ–‡ |
| `--color-secondary-label`| `rgba(60,60,67,0.6)` | `rgba(235,235,245,0.6)` | è¯´æ˜æ–‡æ¡ˆã€å‰¯æ ‡é¢˜ |

> **[å¾…è¡¥å……] é˜…è¯»å™¨é«˜äº®è‰²æ¿ (éœ€åœ¨ figma.css ä¸­æ–°å¢)**
> *   `--highlight-yellow`: `#FFCC00` (Idea/Insight)

## 3. ç¦»çº¿ä½“éªŒè§„èŒƒ (Offline Experience)

### 3.1 çŠ¶æ€æŒ‡ç¤ºå™¨
*   **ç¦»çº¿çŠ¶æ€**: é¡¶éƒ¨æ˜¾ç¤ºé»„è‰² Banner "ç½‘ç»œå·²æ–­å¼€ï¼Œæ­£åœ¨ä½¿ç”¨ç¦»çº¿æ¨¡å¼"ã€‚
*   **PowerSync çŠ¶æ€**: å³ä¸Šè§’ `PowerSyncIndicator` èƒ¶å›Šï¼š`synced` (ç»¿è‰²ç‚¹)ã€`syncing` (è“è‰²æ—‹è½¬)ã€`error` (çº¢è‰²)ã€‚çŠ¶æ€æ–‡æ¡ˆåˆ†åˆ«ä¸º "å·²åŒæ­¥", "æ­£åœ¨åŒæ­¥", "åŒæ­¥å—é˜»"ã€‚
*   **å†²çªæç¤º**: å½“ PowerSync ä¸‹å‘ `conflict_copy` æ—¶å¼¹å‡º Toast + Badgeï¼Œå¼•å¯¼ç”¨æˆ·åˆå¹¶ã€‚

### 3.2 åŠŸèƒ½é™çº§ (Graceful Degradation)
*   **AI åŠŸèƒ½**: æŒ‰é’®ç½®ç° (Disabled)ï¼ŒTooltip æç¤º "éœ€è¦ç½‘ç»œè¿æ¥"ã€‚
*   **æœç´¢**: ä»…æœç´¢æœ¬åœ°å·²ç¼“å­˜å†…å®¹ï¼Œæœç´¢æ¡†ä¸‹æ–¹æç¤º "ç¦»çº¿æ¨¡å¼ï¼šä»…æœç´¢æœ¬åœ°"ã€‚
*   **å›¾ç‰‡åŠ è½½**: åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºæœ¬åœ°å ä½ç¬¦ (Placeholder)ã€‚

### 3.3 å†²çªè§£å†³ UI
*   **è‡ªåŠ¨è§£å†³**: ä¸æ˜¾ç¤º UI (å¦‚é˜…è¯»è¿›åº¦ LWW)ã€‚
*   **æ‰‹åŠ¨è§£å†³**: å¼¹å‡ºæ¨¡æ€æ¡† (Modal)ï¼Œå±•ç¤º "æœåŠ¡å™¨ç‰ˆæœ¬" vs "æœ¬åœ°ç‰ˆæœ¬" å¯¹æ¯”ï¼Œæä¾› [ä¿ç•™æœ¬åœ°] [ä¿ç•™æœåŠ¡å™¨] [ä¿ç•™ä¸¤è€…] é€‰é¡¹ã€‚
> *   `--highlight-green`: `#34C759` (Fact/Data)
> *   `--highlight-blue`: `#007AFF` (Quote/Beautiful)

### 2.2 æ’ç‰ˆ (Typography)
*   **UI Font Stack**:
    `--font-ui`: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", sans-serif;
*   **Reader Font Stack** (é˜…è¯»å™¨ä¸“ç”¨):
    *   Default: `Source Serif 4`
    *   Fallback: `Noto Serif SC`
*   **[å¼ºåˆ¶] ä¸­æ–‡æ ‡ç‚¹è§„èŒƒ**ï¼š
    æ‰€æœ‰ç•Œé¢æ–‡æ¡ˆå¿…é¡»ä½¿ç”¨ **è‹±æ–‡åŠè§’æ ‡ç‚¹** (`, . : ; ? !`)ï¼Œå¹¶åœ¨æ ‡ç‚¹ååŠ ç©ºæ ¼ã€‚
    *   âœ… `é˜…è¯», è†å¬, å‘ç°.`
    *   âŒ `é˜…è¯»ï¼Œè†å¬ï¼Œå‘ç°ã€‚`

### 2.3 è´¨æ„Ÿä¸ç‰¹æ•ˆ (Effects)

> [!IMPORTANT]
> **iOS 26 Liquid Glass å…¼å®¹æ€§** (WWDC 2025)
> æœ¬é¡¹ç›®çš„ç»ç’ƒæ•ˆæœè®¾è®¡å·²å®Œå…¨ç¬¦åˆ Apple iOS 26 "Liquid Glass" è®¾è®¡è§„èŒƒã€‚

*   **Liquid Glass (æ ¸å¿ƒè§†è§‰ç‰¹å¾)**:
    *   **å‚æ•°**: `backdrop-filter: blur(24px) saturate(180%)`
    *   **åº”ç”¨åœºæ™¯**: é¡¶éƒ¨å¯¼èˆªæ  (Sticky Header)ã€ä¾§è¾¹æ  (Sidebar)ã€æµ®åŠ¨å·¥å…·æ  (Toolbar)ã€Modalã€Dropdownã€‚
    *   **é™çº§ç­–ç•¥**: åœ¨ä¸æ”¯æŒ backdrop-filter çš„è®¾å¤‡ä¸Šï¼Œå›é€€åˆ° `opacity: 0.95` çš„çº¯è‰²èƒŒæ™¯ã€‚

**ä»£ç å®ç°æ˜ å°„** (å‚è§ `figma.css`):

| æ•ˆæœå±‚çº§ | CSS Utility | å‚æ•° | åº”ç”¨åœºæ™¯ |
|----------|-------------|------|----------|
| æ ‡å‡†ç»ç’ƒ | `backdrop-liquid-glass` | `blur(24px)` + overlay | ä¾§è¾¹æ ã€Sheet |
| é‡åº¦ç»ç’ƒ | `backdrop-glass-heavy` | `blur(40px) saturate(180%)` | Modalã€Dialog |
| é®ç½©å±‚ | `bg-black/20 backdrop-blur-sm` | `blur(4px)` | å¼¹çª—èƒŒæ™¯é®ç½© |
| å†…å®¹å®¹å™¨ | `bg-white/95 backdrop-blur-xl` | `blur(24px)` | å¼¹çª—å†…å®¹åŒº |

*   **åœ†è§’ (Radius)**:
    *   `--radius`: `10px` (æ ‡å‡†å®¹å™¨)
    *   `full`: (æŒ‰é’®ã€èƒ¶å›Šæ ‡ç­¾)

### 2.4 åŠ¨æ•ˆ (Motion)
*   **Easing**: `cubic-bezier(0.22, 1, 0.36, 1)` (Apple é£æ ¼çš„è‡ªç„¶å›å¼¹)ã€‚
*   **Duration**:
    *   Fast: `150ms` (Hover, Click)
    *   Medium: `300ms` (Panel Slide, Modal Fade)

### 2.5 æ™ºèƒ½é…è‰² (Adaptive Colors)
*   **å°é¢åè‰²ç­–ç•¥**: å¯¹äºå åŠ åœ¨ä¹¦ç±å°é¢ä¸Šçš„å›¾æ ‡ï¼ˆå¦‚ Cloud, Checkï¼‰ï¼Œå¿…é¡»è®¡ç®—å›¾ç‰‡ä¸»è‰²è°ƒäº®åº¦ (Luminance)ã€‚
    *   L > 0.5 (æµ…è‰²å°é¢) -> å›¾æ ‡ä½¿ç”¨æ·±è‰²åŠé€æ˜ (`rgba(0,0,0,0.6)`).
    *   L <= 0.5 (æ·±è‰²å°é¢) -> å›¾æ ‡ä½¿ç”¨æµ…è‰²åŠé€æ˜ (`rgba(255,255,255,0.8)`).
    *   æŠ€æœ¯å®ç°æ¨è: `colorthief` æˆ– `fast-average-color`.

### 2.6 é—´è·ç³»ç»Ÿ (Spacing)
*éµå¾ª 4px æ …æ ¼ç³»ç»Ÿï¼Œä¿è¯è§†è§‰å‘¼å¸æ„Ÿã€‚*
*   `--space-xs`: `4px` (ç´§å‡‘é—´è·)
*   `--space-s`: `8px` (ç»„ä»¶å†…é—´è·)
*   `--space-m`: `16px` (é»˜è®¤é—´è·)
*   `--space-l`: `24px` (åŒºå—é—´è·)
*   `--space-xl`: `32px` (é¡µé¢è¾¹ç¼˜)

### 2.7 å±‚çº§è§„èŒƒ (Z-Index Scale)
*è§£å†³å±‚å å†²çªï¼Œä¸¥ç¦ä½¿ç”¨ä»»æ„æ•°å­— (å¦‚ z-9999)ã€‚*
*   `z-0`: é»˜è®¤å±‚çº§
*   `z-10`: **Elevated** (æ‚¬æµ®å¡ç‰‡, Dropdown)
*   `z-40`: **Sticky** (é¡¶éƒ¨å¯¼èˆªæ , ä¾§è¾¹æ )
*   `z-50`: **Overlay** (Contextual Toolbar, é®ç½©å±‚)
*   `z-100`: **Modal** (å¯¹è¯æ¡†, æŠ½å±‰)
*   `z-200`: **Toast** (å…¨å±€é€šçŸ¥)

## 4. ç»„ä»¶è§„èŒƒ (Component Specs)

### 3.1 å·²æœ‰åŸºç¡€ç»„ä»¶ (Base Components)
*ç›´æ¥å¤ç”¨ `web/src/components/ui/` ä¸‹çš„ç»„ä»¶*

*   **Button (æŒ‰é’®ç³»ç»Ÿ)**:
    æ‰€æœ‰æŒ‰é’®å¿…é¡»éµå¾ªä»¥ä¸‹è§„èŒƒï¼Œç¡®ä¿åœ¨æ˜äº®/æš—é»‘æ¨¡å¼ä¸‹å‡å¯è§ä¸”æ˜“äºäº¤äº’ã€‚

    | å˜ä½“ | æ ·å¼ | åº”ç”¨åœºæ™¯ |
    | :--- | :--- | :--- |
    | `primary` | `bg-system-blue text-white shadow-md hover:opacity-90 rounded-full font-medium` | ä¸»è¦æ“ä½œ (ä¸Šä¼ ã€ä¿å­˜ã€ç¡®è®¤) |
    | `secondary` | `bg-secondary-background text-label border border-separator hover:bg-tertiary-background rounded-full` | æ¬¡è¦æ“ä½œ (å–æ¶ˆã€è¿”å›) |
    | `ghost` | `text-system-blue hover:bg-system-blue/10 rounded-lg` | æ–‡å­—é“¾æ¥å¼æŒ‰é’® |
    | `destructive` | `bg-system-red text-white hover:opacity-90 rounded-full` | å±é™©æ“ä½œ (åˆ é™¤) |
    | `icon` | `p-2 rounded-full hover:bg-secondary-background transition-colors` | çº¯å›¾æ ‡æŒ‰é’® |

    **[é‡è¦] å¯è§æ€§è§„èŒƒ**:
    *   ä¸»è¦æŒ‰é’®å¿…é¡»æœ‰ `shadow-md` é˜´å½±ç¡®ä¿åœ¨æµ…è‰²èƒŒæ™¯ä¸‹å¯è§ã€‚
    *   å›¾æ ‡æŒ‰é’®å¿…é¡»æœ‰ `hover` çŠ¶æ€åé¦ˆã€‚
    *   æ‰€æœ‰æŒ‰é’®ç‚¹å‡»çƒ­åŒº â‰¥ 44x44px (ç§»åŠ¨ç«¯)ã€‚

*   **Input**:
    *   `bg-tertiary-background focus:ring-2 ring-system-blue border-none`
    *   **Error State**: `ring-2 ring-system-red bg-system-red/5` (é”™è¯¯æ—¶è¾¹æ¡†å˜çº¢ï¼ŒèƒŒæ™¯å¾®çº¢)

*   **Modal / Dialog (å¼¹å‡ºå¯¹è¯æ¡†)**:
    **[é‡è¦] æ¯›ç»ç’ƒæ•ˆæœè§„èŒƒ** - æ‰€æœ‰å¼¹å‡ºå±‚å¿…é¡»ä½¿ç”¨ç™½è‰²æ¯›ç»ç’ƒæ•ˆæœï¼Œç¦æ­¢é»‘è‰²é€æ˜èƒŒæ™¯ã€‚

    | å±æ€§ | å€¼ | è¯´æ˜ |
    | :--- | :--- | :--- |
    | é®ç½©å±‚ | `bg-black/20 backdrop-blur-sm` | è½»å¾®åŠé€æ˜ + æ¨¡ç³Š |
    | å†…å®¹å®¹å™¨ (Light) | `bg-white/95 backdrop-blur-xl shadow-2xl border border-gray-200/50` | ç™½è‰²æ¯›ç»ç’ƒ + å¼ºé˜´å½± |
    | å†…å®¹å®¹å™¨ (Dark) | `bg-gray-900/95 backdrop-blur-xl shadow-2xl border border-white/10` | æ·±è‰²æ¯›ç»ç’ƒ |
    | åœ†è§’ | `rounded-2xl` | 16px åœ†è§’ |
    | åŠ¨æ•ˆ | `animate-in fade-in-0 zoom-in-95 duration-200` | **ä»ä¸­å¿ƒç”±å°å˜å¤§ + æ·¡å…¥** |

    **[å¼ºåˆ¶] å¼¹çª—åŠ¨æ•ˆè§„èŒƒ**:
    *   æ‰€æœ‰å¼¹çª—å¿…é¡»æœ‰ **ç¼©æ”¾è¿›å…¥åŠ¨æ•ˆ** (ä» 95% æ”¾å¤§åˆ° 100%)ã€‚
    *   ç¼©æ”¾åŸç‚¹ï¼š`transform-origin: center` (Modal) æˆ– `transform-origin: top right` (Dropdown)ã€‚
    *   æ—¶é•¿ï¼š`200ms`ï¼Œç¼“åŠ¨å‡½æ•°ï¼š`cubic-bezier(0.22, 1, 0.36, 1)`ã€‚

*   **Dropdown Menu (ä¸‹æ‹‰èœå•)**:
    | å±æ€§ | å€¼ | è¯´æ˜ |
    | :--- | :--- | :--- |
    | å®¹å™¨ | `bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl border rounded-xl` | ä¸ Modal ç»Ÿä¸€é£æ ¼ |
    | åŠ¨æ•ˆ | `animate-menu-expand` | **ä»è§¦å‘ç‚¹ä½ç½®ç”±å°å˜å¤§å±•å¼€** |
    | æ–¹å‘ | `transform-origin: top right` | ä»å³ä¸Šè§’å±•å¼€ |

    **è§†è§‰æ•ˆæœ**: æ‰€æœ‰å¼¹å‡ºå±‚åº”æœ‰æ˜æ˜¾çš„æ‚¬æµ®æ„Ÿï¼Œä½¿ç”¨ç»Ÿä¸€çš„ç™½è‰²æ¯›ç»ç’ƒé£æ ¼ã€‚

### 3.2 ä¸šåŠ¡æ ¸å¿ƒç»„ä»¶ (Business Components)
*éœ€æŒ‰æ­¤è§„èŒƒå¼€å‘*

*   **Contextual AI Toolbar (ä¸Šä¸‹æ–‡å·¥å…·æ )**
    *   **è§¦å‘**: ç”¨æˆ·åœ¨é˜…è¯»å™¨é€‰ä¸­æ–‡æœ¬æ—¶ã€‚
    *   **å¤–è§‚**: é»‘è‰² (`#1C1C1E`) èƒ¶å›ŠçŠ¶æ‚¬æµ®æ¡ï¼Œç™½è‰²å›¾æ ‡ã€‚
    *   **åŠŸèƒ½**: [Sparkles] æ‘˜è¦ | [FileText] ç¬”è®° | [Languages] ç¿»è¯‘ã€‚
*   **AI Chat Panel (å¯¹è¯é¢æ¿)**
    *   **æµå¼æ•ˆæœ**: å¿…é¡»å®ç°æ‰“å­—æœºæ•ˆæœ (Typewriter Effect)ã€‚
    *   **å…‰æ ‡**: å°¾éƒ¨è·Ÿéšé—ªçƒçš„ `system-purple` å…‰æ ‡ã€‚
    *   **å¼•ç”¨**: `[1]` è§’æ ‡éœ€å¯ç‚¹å‡»ï¼Œè·³è½¬è‡³æ­£æ–‡é«˜äº®å¤„ã€‚
*   **ä¹¦ç±å¡ç‰‡ä½“ç³» (Book Card System)**
    åŸºäº Apple Books é£æ ¼çš„å“åº”å¼å¡ç‰‡ç»„ï¼Œæ”¯æŒå¤šç§çŠ¶æ€ä¸è‡ªé€‚åº”é…è‰²ã€‚

    **1. Horizontal Card (æ¨ªå‘é˜…è¯»å¡ç‰‡) [é‡è¦æ›´æ–° - Apple Books é£æ ¼]**
    *   **åœºæ™¯**: é¦–é¡µ"ç»§ç»­é˜…è¯»"åŒºåŸŸã€"ä¹‹å‰é˜…è¯»"åˆ—è¡¨ã€‚
    *   **å°ºå¯¸**: é«˜åº¦ `100px - 120px`ï¼Œå®½åº¦è‡ªé€‚åº” (æœ€å° `280px`)ã€‚
    *   **è§†è§‰æ„é€  (é‡è¦)**:
        *   **å¸ƒå±€æ¯”ä¾‹**: **å°é¢å  1/4 å®½åº¦ï¼Œå†…å®¹åŒºå  3/4 å®½åº¦** (ä¸¥ç¦æ”¹å˜æ­¤æ¯”ä¾‹)ã€‚
        *   **å°é¢åŒº (å·¦ä¾§ 25%)**:
            *   2:3 æ¯”ä¾‹å°é¢å›¾ï¼Œåœ†è§’ `8px`ï¼Œ**é˜´å½± `shadow-lg`**ã€‚
            *   å®Œå…¨é å·¦æ˜¾ç¤ºï¼Œæ— å†…è¾¹è·ã€‚
        *   **èƒŒæ™¯åŒº (å³ä¾§ 75%)**:
            *   **Ambient Blur æ•ˆæœ**: ä»å°é¢å›¾ç‰‡æå–ä¸»è‰²è°ƒï¼Œæˆ–å°†å°é¢æŸåŒºåŸŸæ”¾å¤§å `blur-3xl` å¤„ç†ã€‚
            *   æ¸å˜è¦†ç›–: ä»å·¦ä¾§é€æ˜åˆ°å³ä¾§åŠé€æ˜ç™½/é»‘ (`from-transparent to-white/20`)ã€‚
        *   **æ–‡å­—åŒº (è¦†ç›–åœ¨èƒŒæ™¯ä¸Š)**:
            *   **æ™ºèƒ½åè‰²æ–‡å­—**: æ ¹æ®èƒŒæ™¯äº®åº¦è‡ªåŠ¨åˆ‡æ¢ (æµ…èƒŒæ™¯ç”¨æ·±è‰²å­—ï¼Œæ·±èƒŒæ™¯ç”¨æµ…è‰²å­—)ã€‚
            *   Title: `font-semibold text-base`ï¼Œæœ€å¤š 2 è¡Œã€‚
            *   Author: `text-sm opacity-80`ï¼Œæœ€å¤š 1 è¡Œã€‚
            *   Progress: `text-xs opacity-60`ï¼Œæ˜¾ç¤º "25%" æˆ– "å·²è¯»å®Œ"ã€‚
        *   **è¿›åº¦æ¡**: åº•éƒ¨ç»†çº¿è¿›åº¦æ¡ (`h-0.5`)ï¼Œé¢œè‰²ä¸º `system-blue`ã€‚
    *   **æŠ€æœ¯å®ç°**:
        *   ä½¿ç”¨ `fast-average-color` æå–å°é¢ä¸»è‰²è°ƒã€‚
        *   è®¡ç®—äº®åº¦å…¬å¼: `L = (0.299*R + 0.587*G + 0.114*B) / 255`ã€‚
        *   L > 0.5 æ—¶æ–‡å­—ç”¨æ·±è‰²ï¼ŒL <= 0.5 æ—¶æ–‡å­—ç”¨æµ…è‰²ã€‚
    *   **åŠ¨æ•ˆ**: `hover:scale-[1.02]`ï¼Œ`transition-transform duration-200`ã€‚

    **2. Hero Card (é¦–é¡µå¤§å¡ç‰‡)**
    *   ç»§æ‰¿ Horizontal Card è§„èŒƒï¼Œä½†å°ºå¯¸æ›´å¤§ (é«˜åº¦ `160px`)ã€‚
    *   å¢åŠ æ›´å¤šæŒ‰é’® (`MoreHorizontal`) åœ¨å³ä¸‹è§’ã€‚

    **3. List Item Card (åˆ—è¡¨/å†å²) [é‡è¦æ›´æ–° - Horizontal Style]**
    *   **åœºæ™¯**: ä¹¦æ¶åˆ—è¡¨æ¨¡å¼ã€"ä¹‹å‰é˜…è¯»"åˆ—è¡¨ã€‚
    *   **å¸ƒå±€**: é‡‡ç”¨ Horizontal Card é£æ ¼ (Ambient Blur èƒŒæ™¯ + 1/4 å°é¢)ã€‚
    *   **å°ºå¯¸**: é«˜åº¦ `100px`ï¼Œå®½åº¦è‡ªé€‚åº”ã€‚
    *   **æ–‡å­—è§„èŒƒ**:
        *   **Title**: `font-semibold text-base`ï¼Œå•è¡Œæ˜¾ç¤ºï¼Œ**ç¦æ­¢çœç•¥å·** (ä½¿ç”¨ `overflow-hidden whitespace-nowrap`)ã€‚
        *   **Author**: `text-sm opacity-80`ï¼Œå•è¡Œæ˜¾ç¤ºï¼Œ**ç¦æ­¢çœç•¥å·**ã€‚
    *   **è§†è§‰æ„é€ **:
        *   ä¸ Horizontal Card ä¸€è‡´ï¼Œä½†ä½œä¸ºåˆ—è¡¨é¡¹ä½¿ç”¨ã€‚
        *   **å°é¢**: 2:3 æ¯”ä¾‹ï¼Œåœ†è§’ `8px`ï¼Œ`shadow-lg`ã€‚
        *   **èƒŒæ™¯**: åŠ¨æ€æå–å°é¢ä¸»è‰²è°ƒ + Ambient Blurã€‚

    **3. Grid Standard Card (ä¹¦æ¶ç½‘æ ¼) [é‡è¦æ›´æ–°]**
    *   **åœºæ™¯**: ä¹¦æ¶ç½‘æ ¼æ¨¡å¼ (ç«–å‘å¡ç‰‡)ã€‚
    *   **å°ºå¯¸**: å®½åº¦è‡ªé€‚åº” (çº¦ `100px - 120px`)ï¼Œé«˜åº¦è‡ªé€‚åº”ã€‚
    *   **è§†è§‰æ„é€ **:
        *   **å°é¢**: 2:3 æ¯”ä¾‹ï¼Œåœ†è§’ `8px`ï¼Œ**é˜´å½± `shadow-md` (å¼ºåˆ¶)**ã€‚
        *   **äº‘çŠ¶æ€**: åŒ Hero Cardï¼Œå°é¢ä¸­å¿ƒæ˜¾ç¤ºæ™ºèƒ½åè‰² `Cloud` å›¾æ ‡ã€‚
        *   **åº•éƒ¨ä¿¡æ¯ (è¦†ç›–åœ¨å°é¢ä¸Š)**:
            *   **å–æ¶ˆä¹¦åæ˜¾ç¤º**: ä¸åœ¨å¡ç‰‡ä¸‹æ–¹æ˜¾ç¤ºä¹¦åå’Œä½œè€…ã€‚
            *   å·¦ä¸‹è§’: æ˜¾ç¤ºè¿›åº¦ç™¾åˆ†æ¯” (e.g. "25%")ï¼Œç™½è‰²æ–‡å­—å¸¦åŠé€æ˜é»‘è‰²èƒŒæ™¯ã€‚
            *   å³ä¸‹è§’: `MoreHorizontal` å›¾æ ‡ (ç™½è‰²ï¼Œç‚¹å‡»å”¤èµ·å•æœ¬ä¹¦ç±æ“ä½œèœå•)ã€‚
        *   **åº•éƒ¨æ¸å˜é®ç½©**: `bg-gradient-to-t from-black/60 to-transparent`ï¼Œç¡®ä¿æ–‡å­—å¯è¯»ã€‚
    *   **é˜´å½±è§„èŒƒ**: æ‰€æœ‰ä¹¦ç±å¡ç‰‡å¿…é¡»æœ‰ `shadow-md` é˜´å½±ï¼Œå¢å¼ºå±‚æ¬¡æ„Ÿã€‚

    **4. Grid Micro Card (å¹´åº¦/æˆå°±)**
    *   **åœºæ™¯**: "å¹´åº¦å·²è¯»"å°æ ¼å­ã€‚
    *   **å°ºå¯¸**: ç´§å‡‘å‹ Gridï¼Œçº¯å°é¢ã€‚
    *   **æ ·å¼**:
        *   **é˜´å½±**: `shadow-sm`ã€‚
        *   **çŠ¶æ€**: å³ä¸‹è§’å›ºå®šæ˜¾ç¤ºè“è‰²å®å¿ƒ `Check` å›¾æ ‡ (è¡¨ç¤ºå·²å®Œæˆ)ã€‚

    **5. Processing Card (å¤„ç†ä¸­çŠ¶æ€) [NEW]**
    *   **åœºæ™¯**: ä¹¦ç±æ­£åœ¨è½¬æ¢æ ¼å¼ (Calibre) æˆ–æ­£åœ¨ OCR è¯†åˆ«æ—¶æ˜¾ç¤ºã€‚
    *   **å°ºå¯¸**: ä¸ Grid Standard Card å®Œå…¨ç›¸åŒ (ä¿æŒå¸ƒå±€ä¸€è‡´æ€§)ã€‚
    *   **è§†è§‰æ„é€ **:
        *   **èƒŒæ™¯**: ç°è‰²æ¸å˜ (`from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600`)ã€‚
        *   **è„‰å†²åŠ¨æ•ˆ**: `animate-pulse` - åƒå¿ƒè·³ä¸€æ ·çš„å‘¼å¸ç¯æ•ˆæœã€‚
        *   **çŠ¶æ€æ–‡æœ¬**: å¡ç‰‡ä¸­å¤®æ˜¾ç¤º "æ­£åœ¨å¤„ç†..." æˆ– "æ­£åœ¨è½¬æ¢..." æ–‡æœ¬ã€‚
        *   **å›¾æ ‡**: é¡¶éƒ¨æ˜¾ç¤º `Loader2` æ—‹è½¬å›¾æ ‡ã€‚
    *   **åŠ¨æ•ˆå‚æ•°**:
        *   `animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite`
        *   äº®åº¦åœ¨ 100% å’Œ 75% ä¹‹é—´å¾ªç¯ã€‚
    *   **é€‚ç”¨çŠ¶æ€**:
        *   `processing`: é€šç”¨å¤„ç†ä¸­
        *   `converting`: Calibre æ ¼å¼è½¬æ¢ä¸­
        *   `ocr`: OCR æ–‡å­—è¯†åˆ«ä¸­

    **6. Dedup Card (ç§’ä¼ æˆåŠŸçŠ¶æ€) [NEW - ADR-008]**
    *   **åœºæ™¯**: SHA256 å…¨å±€å»é‡å‘½ä¸­ï¼Œç§’ä¼ æˆåŠŸæ—¶çŸ­æš‚æ˜¾ç¤ºã€‚
    *   **å°ºå¯¸**: ä¸ Grid Standard Card å®Œå…¨ç›¸åŒã€‚
    *   **è§†è§‰æ„é€ **:
        *   **èƒŒæ™¯**: ç»¿è‰²æ¸å˜ (`from-green-100 to-green-200 dark:from-green-900 dark:to-green-800`)ã€‚
        *   **å›¾æ ‡**: ä¸­å¤®æ˜¾ç¤º `Zap` æˆ– `CheckCircle` å›¾æ ‡ (ç»¿è‰²)ã€‚
        *   **çŠ¶æ€æ–‡æœ¬**: "ç§’ä¼ æˆåŠŸ" æˆ– "æ–‡ä»¶å·²å­˜åœ¨"ã€‚
        *   **åŠ¨æ•ˆ**: æ·¡å…¥å 1.5s è‡ªåŠ¨è¿‡æ¸¡åˆ°æ­£å¸¸å¡ç‰‡çŠ¶æ€ã€‚
    *   **ç”¨é€”**: ç»™ç”¨æˆ·è§†è§‰åé¦ˆï¼Œå‘ŠçŸ¥æ–‡ä»¶æ— éœ€é‡æ–°ä¸Šä¼ ã€‚

### 3.3 ä¹¦ç±å¡ç‰‡èœå• (Book Card Menu)

**â‹® ä¸‹æ‹‰èœå•è§„èŒƒ** - ä¹¦ç±å¡ç‰‡å³ä¸‹è§’çš„æ›´å¤šæ“ä½œèœå•ã€‚

| èœå•é¡¹ | å›¾æ ‡ | æ˜¾ç¤ºæ¡ä»¶ | è¯´æ˜ |
|-------|------|---------|------|
| æŸ¥çœ‹è¯¦æƒ… | `Info` | å§‹ç»ˆæ˜¾ç¤º | æŸ¥çœ‹ä¹¦ç±è¯¦ç»†ä¿¡æ¯ |
| ç¼–è¾‘ä¿¡æ¯ | `Pencil` | å§‹ç»ˆæ˜¾ç¤º | ä¿®æ”¹ä¹¦åå’Œä½œè€… |
| æ·»åŠ åˆ°ä¹¦æ¶ | `FolderPlus` | å§‹ç»ˆæ˜¾ç¤º | æ·»åŠ åˆ°ä¹¦æ¶åˆ†ç±» |
| OCR æœ¬ä¹¦ | `ScanText` | `is_image_based && ocr_status !== 'completed'` | è§¦å‘ OCR å¤„ç† |
| OCR å¤„ç†ä¸­ | `Loader2` (æ—‹è½¬) | `ocr_status === 'processing'` | ç¦ç”¨çŠ¶æ€ï¼Œæ˜¾ç¤ºè¿›åº¦ |
| åˆ é™¤ | `Trash2` | å§‹ç»ˆæ˜¾ç¤º | **å±é™©æ“ä½œ**ï¼Œéœ€äºŒæ¬¡ç¡®è®¤ |

**åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—‘ï¸ ç¡®è®¤åˆ é™¤                                                    â”‚
â”‚                                                                 â”‚
â”‚  ç¡®å®šè¦åˆ é™¤ã€Š{ä¹¦å}ã€‹å—?                                          â”‚
â”‚                                                                 â”‚
â”‚  æ­¤æ“ä½œå°†åˆ é™¤:                                                    â”‚
â”‚  â€¢ æ‚¨åœ¨æœ¬ä¹¦ä¸­çš„æ‰€æœ‰ç¬”è®°å’Œé«˜äº®                                       â”‚
â”‚  â€¢ æ‚¨çš„é˜…è¯»è¿›åº¦è®°å½•                                                â”‚
â”‚  â€¢ ä¹¦æ¶åˆ†ç±»å…³è”                                                   â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ æ­¤æ“ä½œæ— æ³•æ’¤é”€                                                â”‚
â”‚                                                                 â”‚
â”‚                                [å–æ¶ˆ]            [ğŸ—‘ï¸ ç¡®è®¤åˆ é™¤]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆ é™¤æŒ‰é’®æ ·å¼**: `destructive` å˜ä½“ (`bg-system-red text-white`)

### 3.4 ä¸Šä¼ çŠ¶æ€æŒ‡ç¤ºå™¨ (Upload Status Indicator)

**ä¸Šä¼ æµç¨‹çŠ¶æ€æœº**:
```
idle â†’ hashing â†’ checking â†’ uploading/dedup â†’ completing â†’ done
                    â†“              â†“
                  error          error
```

| çŠ¶æ€ | å›¾æ ‡ | æ–‡æ¡ˆ | è¿›åº¦æ¡ |
|-----|------|------|-------|
| `idle` | - | - | - |
| `hashing` | `Loader2` (æ—‹è½¬) | "æ­£åœ¨è®¡ç®—æ–‡ä»¶æŒ‡çº¹..." | ä¸ç¡®å®šè¿›åº¦ |
| `checking` | `Search` | "æ­£åœ¨æ£€æŸ¥æ–‡ä»¶..." | ä¸ç¡®å®šè¿›åº¦ |
| `uploading` | `Upload` | "æ­£åœ¨ä¸Šä¼ ... {percent}%" | ç¡®å®šè¿›åº¦ |
| `dedup` | `Zap` | "ç§’ä¼ æˆåŠŸ!" | 100% (ç»¿è‰²) |
| `completing` | `Loader2` (æ—‹è½¬) | "æ­£åœ¨å¤„ç†..." | ä¸ç¡®å®šè¿›åº¦ |
| `done` | `CheckCircle` | "ä¸Šä¼ å®Œæˆ" | 100% (ç»¿è‰²) |
| `error` | `XCircle` | "{é”™è¯¯ä¿¡æ¯}" | çº¢è‰² |

**ç§’ä¼ ç‰¹æ®Šæ•ˆæœ**:
- å½“æ£€æµ‹åˆ° `dedup_available: true` æ—¶ï¼Œè·³è¿‡ä¸Šä¼ æ­¥éª¤
- æ˜¾ç¤º `Zap` é—ªç”µå›¾æ ‡ + "ç§’ä¼ æˆåŠŸ!" æ–‡æ¡ˆ
- è¿›åº¦æ¡ç›´æ¥è·³åˆ° 100%ï¼Œä½¿ç”¨ç»¿è‰²å¡«å……
- 0.5s åè‡ªåŠ¨è¿›å…¥ `completing` çŠ¶æ€

## 5. ç§»åŠ¨ç«¯ä¸ PWA é€‚é… (Mobile & PWA)

### 4.1 ç§»åŠ¨ç«¯ä¼˜å…ˆ (Mobile First)
*   **æ–­ç‚¹ (Breakpoints)**:
    *   `md` (768px): å¹³æ¿/æ¡Œé¢åˆ†ç•Œçº¿ã€‚`< md` ä¸ºç§»åŠ¨ç«¯è§†å›¾ï¼Œ`>= md` ä¸ºæ¡Œé¢è§†å›¾ã€‚
*   **è§¦è¾¾åŒºåŸŸ (Touch Targets)**: æ‰€æœ‰äº¤äº’å…ƒç´ çš„ç‚¹å‡»çƒ­åŒºå¿…é¡» **â‰¥ 44x44px**ã€‚
*   **å¯¼èˆªæ¨¡å¼**:
    *   Mobile: Bottom Tab Bar (å›¾æ ‡+æ ‡ç­¾)ã€‚
    *   Desktop: Left Sidebar (å›¾æ ‡+æ ‡ç­¾)ã€‚

### 4.2 PWA ç¦»çº¿ä½“éªŒ
*   **Service Worker**: å¿…é¡»ç¼“å­˜åº”ç”¨ Shell (HTML/CSS/JS) å’Œå·²ä¸‹è½½çš„ä¹¦ç±èµ„æºã€‚
*   **ç¦»çº¿æŒ‡ç¤ºå™¨**: å½“æ£€æµ‹åˆ°ç½‘ç»œæ–­å¼€æ—¶ï¼š
    1.  åº”ç”¨å˜ä¸º **ç°åº¦æ¨¡å¼ (Grayscale)** æˆ–é¡¶éƒ¨æ˜¾ç¤º "Offline Mode" æ©™è‰²æ¡ã€‚
    2.  æ‰€æœ‰éœ€è”ç½‘æ“ä½œ (AI, Upload) æŒ‰é’®ç½®ç°ï¼Œç‚¹å‡»æç¤º "ç¦»çº¿ä¸å¯ç”¨"ã€‚

## 6. å›¾æ ‡ç³»ç»Ÿ (Iconography)

**åº“**: å¿…é¡»ä½¿ç”¨ `lucide-react`ï¼Œç»Ÿä¸€ `stroke-width={1.5}` (å¸¸è§„) æˆ– `2` (å¼ºè°ƒ)ã€‚

| è¯­ä¹‰ | å›¾æ ‡ç»„ä»¶ (Lucide) | å¤‡æ³¨ |
| :--- | :--- | :--- |
| **AI / æ™ºèƒ½** | `Sparkles` | å¿…é¡»ä½¿ç”¨ç´«è‰²æ¸²æŸ“ |
| **ä¹¦åº“ / é˜…è¯»** | `Library` / `BookOpen` | - |
| **åŒæ­¥ / ä¸‹è½½** | `Cloud` / `CloudDownload` | - |
| **ç¬”è®° / ç”Ÿæˆ** | `FileText` | - |
| **æ›´å¤šæ“ä½œ** | `MoreHorizontal` | ä¸¥ç¦ä½¿ç”¨ä¸‰ä¸ªç‚¹å›¾ç‰‡ |
| **èœå•** | `Menu` | ç§»åŠ¨ç«¯å·¦ä¸Šè§’ |

## 7. è´¨é‡é—¨ç¦ (Quality Gates)
*   **A11Y**: æ‰€æœ‰ç»„ä»¶å¿…é¡»é€šè¿‡ `axe-core` æ‰«æï¼Œæ—  Serious/Critical çº§é”™è¯¯ã€‚
*   **å¯¹æ¯”åº¦**: æ–‡æœ¬ä¸èƒŒæ™¯å¯¹æ¯”åº¦ â‰¥ 4.5:1 (WCAG AA)ã€‚
*   **ä»£ç æ£€æŸ¥**: ç¦æ­¢åœ¨ TSX/JSX ä¸­å†™æ­» Hex é¢œè‰²å€¼ï¼ˆå¦‚ `className="bg-[#F5F5F5]"`ï¼‰ï¼Œå¿…é¡»ä½¿ç”¨ Tailwind ç±»åï¼ˆå¦‚ `bg-secondary-background`ï¼‰ã€‚

