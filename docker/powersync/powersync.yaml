# PowerSync Service 配置 - Open Edition
# @see https://docs.powersync.com/self-hosted/configuration

# 复制配置
replication:
  connections:
    - type: postgresql
      uri: !env PS_DATABASE_URI
      # 禁用 SSL（容器内部通信）
      sslmode: disable

# 同步规则
sync_rules:
  path: /app/sync_rules.yaml

# JWT 认证 - 使用 Supabase 风格 HS256 对称密钥
client_auth:
  supabase: true
  supabase_jwt_secret: !env PS_SUPABASE_JWT_SECRET

# 存储配置 - 使用 MongoDB
storage:
  type: mongodb
  uri: !env PS_MONGO_URI

# API 监听
api:
  port: 8080
  
# 指标监控
telemetry:
  disable_telemetry_sharing: true
  internal_service_endpoint: http://127.0.0.1:9090

# 日志
log_level: !env PS_LOG_LEVEL
